<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard Admin | Amelia Laundry</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        :root {
            --purple: #6A0DAD;
            --purple-dark: #4B0082;
            --purple-light: #9A4DFF;
            --sidebar-bg: #2F004F;
            --sidebar-hover: #3D0066;
            --bg-light: #F5F0FF;
        }

        * { box-sizing: border-box; }
        body {
            margin:0;
            font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Arial;
            background: var(--bg-light);
        }

        .layout{display:flex;min-height:100vh;}
        .sidebar{
            width:230px;background:var(--sidebar-bg);color:#fff;
            display:flex;flex-direction:column;
        }
        .sidebar-brand{padding:15px 20px;background:var(--purple);font-weight:700;font-size:20px;}
        .sidebar-user{padding:15px 20px;border-bottom:1px solid rgba(255,255,255,0.15);display:flex;align-items:center;gap:10px;}
        .avatar-circle{
            width:38px;height:38px;border-radius:50%;background:var(--purple-light);
            display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:18px;
        }
        .status-dot{display:inline-block;width:8px;height:8px;border-radius:50%;background:#2ecc71;margin-right:4px;}
        .sidebar-menu{list-style:none;padding:0;margin:0;flex:1;}
        .sidebar-menu li a{display:block;padding:10px 20px;color:#ddd;text-decoration:none;font-size:14px;}
        .sidebar-menu li a:hover,.sidebar-menu li a.active{background:var(--sidebar-hover);color:#fff;}
        .sidebar-footer{padding:10px 20px;font-size:12px;color:#bbb;border-top:1px solid rgba(255,255,255,0.15);}

        .main{flex:1;display:flex;flex-direction:column;}
        .topbar{
            background:var(--purple-dark);color:#fff;padding:10px 20px;
            display:flex;justify-content:space-between;align-items:center;
        }
        .content-wrapper{padding:20px;}

        .alert-welcome{
            background:var(--purple-light);color:#fff;border-radius:10px;
            padding:10px 15px;margin-bottom:15px;
        }

        .summary-card{
            padding:14px;border-radius:10px;color:#fff;
            display:flex;justify-content:space-between;align-items:center;
            box-shadow:0 3px 12px rgba(0,0,0,0.15);
        }
        .summary-card .label{font-size:13px;text-transform:uppercase;letter-spacing:0.04em;}
        .summary-card .value{font-size:24px;font-weight:700;}
        .summary-card .icon{font-size:24px;opacity:0.85;}

        .box{background:#fff;border-radius:15px;box-shadow:0 2px 10px rgba(0,0,0,0.1);margin-bottom:20px;}
        .box-header{padding:10px 15px;border-bottom:1px solid #eee;border-radius:15px 15px 0 0;background:var(--purple);color:white;font-weight:600;}
        .box-body{padding:12px 15px 15px;}

        .status-pill{border-radius:999px;padding:4px 11px;font-size:11px;color:#fff;background:var(--purple);}
    </style>
</head>
<body>

<div class="layout">
    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="sidebar-brand">Amelia Laundry</div>
        <div class="sidebar-user">
            <div class="avatar-circle">{{ username|slice:":1"|upper }}</div>
            <div>
                <div style="font-size:14px;">{{ username }}</div>
                <small><span class="status-dot"></span> Online</small>
            </div>
        </div>
        <ul class="sidebar-menu">
            <li><a href="{% url 'admin_dashboard' %}" class="active">ðŸ“Š Dashboard</a></li>
            <li><a href="{% url 'admin_customers' %}">ðŸ‘¥ Data Pelanggan</a></li>
            <li><a href="{% url 'admin_orders' %}">ðŸ§º Data Order Laundry</a></li>
            <li><a href="{% url 'admin_reports' %}">ðŸ“ˆ Laporan</a></li>
            <li><a href="{% url 'logout' %}">ðŸšª Logout</a></li>
        </ul>
        <div class="sidebar-footer">Amelia Laundry &copy; 2025</div>
    </aside>

    <!-- MAIN -->
    <div class="main">
        <header class="topbar">
            <div>Dashboard {{ role }}</div>
            <div>ðŸ‘¤ {{ username }}</div>
        </header>

        <div class="content-wrapper">
            <div class="alert-welcome">
                Selamat datang kembali <b>{{ username }}</b>, semangat bertugas! ðŸ˜„
            </div>

            <div class="row g-3 mb-3">
                <div class="col-md-3">
                    <div class="summary-card" style="background:#9A4DFF;">
                        <div>
                            <div class="label">Permintaan Baru</div>
                            <div class="value">{{ pending_orders }}</div>
                        </div>
                        <div class="icon">ðŸ“¥</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="summary-card" style="background:#6A0DAD;">
                        <div>
                            <div class="label">Order Aktif</div>
                            <div class="value">{{ active_orders }}</div>
                        </div>
                        <div class="icon">ðŸšš</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="summary-card" style="background:#8350E6;">
                        <div>
                            <div class="label">Total Order</div>
                            <div class="value">{{ total_orders }}</div>
                        </div>
                        <div class="icon">ðŸ§º</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="summary-card" style="background:#B04CFF;">
                        <div>
                            <div class="label">Layanan Selesai</div>
                            <div class="value">{{ done_orders }}</div>
                        </div>
                        <div class="icon">âœ…</div>
                    </div>
                </div>
            </div>

            <div class="box">
                <div class="box-header">Ringkasan Order Laundry</div>
                <div class="box-body">
                    {% if orders %}
                        <div class="table-responsive">
                            <table class="table table-sm align-middle">
                                <thead class="table-light">
                                    <tr>
                                        <th>#</th>
                                        <th>Customer</th>
                                        <th>Layanan</th>
                                        <th>Berat</th>
                                        <th>Estimasi harga</th>
                                        <th>Status</th>
                                        <th>Alamat</th>
                                        <th>Catatan</th>
                                        <th>Dibuat</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for order in orders %}
                                    <tr>
                                        <td>{{ order.id }}</td>
                                        <td>{{ order.customer.username }}</td>
                                        <td>{{ order.get_service_type_display }}</td>
                                        <td>{{ order.weight_kg }} kg</td>
                                        <td>Rp {{ order.total_price|floatformat:0 }}</td>
                                        <td><span class="status-pill">{{ order.get_status_display }}</span></td>
                                        <td>{{ order.address }}</td>
                                        <td>{{ order.note }}</td>
                                        <td>{{ order.created_at|date:"d M Y H:i" }}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <p>Belum ada order.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

</body>
</html>
